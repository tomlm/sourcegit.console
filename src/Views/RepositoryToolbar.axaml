<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:m="using:SourceGit.Models"
             xmlns:vm="using:SourceGit.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="SourceGit.Views.RepositoryToolbar"
             x:DataType="vm:Repository"
             xmlns:console="https://github.com/jinek/consolonia">
  <Grid ColumnDefinitions="*,Auto,*">
    <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="{console:OnPlatform Default='4,0,0,0', Console='1,0,0,0'}">
      <Button Classes="icon_button" Width="32" Click="OpenWithExternalTools" ToolTip.Tip="{DynamicResource Text.Repository.OpenWithExternalTools}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.Explore}" Margin="0,2,0,0"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="ðŸ—‚"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>

      <Button Classes="icon_button" Width="32" Click="OpenGitLogs" ToolTip.Tip="{DynamicResource Text.Repository.ViewLogs}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Margin="0,1,0,0" Data="{StaticResource Icons.Logs}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="ðŸ§¾"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>

      <Button Classes="icon_button" Width="32" Click="OpenStatistics" ToolTip.Tip="{DynamicResource Text.Repository.Statistics}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="13" Height="13" Data="{StaticResource Icons.Statistics}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="ðŸ“Š"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>

      <Button Classes="icon_button" Width="32" Click="OpenConfigure" ToolTip.Tip="{DynamicResource Text.Repository.Configure}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.Settings}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="âš™"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>
    </StackPanel>

    <StackPanel Grid.Column="1" Orientation="Horizontal">
      <Button Classes="icon_button" Width="32" Tapped="Fetch">
        <ToolTip.Tip>
          <StackPanel Orientation="Vertical">
            <TextBlock Text="{DynamicResource Text.Fetch}"/>
            <TextBlock Classes="small italic" Margin="{console:OnPlatform Default='0,4,0,0', Console='0,1,0,0'}" Text="{DynamicResource Text.CtrlClickTip}" Foreground="{DynamicResource Brush.FG2}"/>
          </StackPanel>
        </ToolTip.Tip>
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.Fetch}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="â‡£"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>
      <Button Width="0" Height="0" Click="FetchDirectlyByHotKey" IsVisible="False" HotKey="{OnPlatform Ctrl+Down, macOS=âŒ˜+Down}"/>

      <Button Classes="icon_button" Width="32" Margin="{console:OnPlatform Default='16,0,0,0', Console='1,0,0,0'}" Tapped="Pull" IsVisible="{Binding !IsBare}" IsEnabled="{Binding !IsBare}">
        <ToolTip.Tip>
          <StackPanel Orientation="Vertical">
            <TextBlock Text="{DynamicResource Text.Pull}"/>
            <TextBlock Classes="small italic" Margin="{console:OnPlatform Default='0,4,0,0', Console='0,1,0,0'}" Text="{DynamicResource Text.CtrlClickTip}" Foreground="{DynamicResource Brush.FG2}"/>
          </StackPanel>
        </ToolTip.Tip>
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.Pull}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="â‡£"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>
      <Button Width="0" Height="0" Click="PullDirectlyByHotKey" IsVisible="False" IsEnabled="{Binding !IsBare}" HotKey="{OnPlatform Ctrl+Shift+Down, macOS=âŒ˜+Shift+Down}"/>

      <Button Classes="icon_button" Width="32" Margin="{console:OnPlatform Default='16,0,0,0', Console='1,0,0,0'}" Tapped="Push">
        <ToolTip.Tip>
          <StackPanel Orientation="Vertical">
            <TextBlock Text="{DynamicResource Text.Push}"/>
            <TextBlock Classes="small italic" Margin="{console:OnPlatform Default='0,4,0,0', Console='0,1,0,0'}" Text="{DynamicResource Text.CtrlClickTip}" Foreground="{DynamicResource Brush.FG2}"/>
          </StackPanel>
        </ToolTip.Tip>
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.Push}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="â‡¡"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>
      <Button Width="0" Height="0" Click="PushDirectlyByHotKey" IsVisible="False" HotKey="{OnPlatform Ctrl+Shift+Up, macOS=âŒ˜+Shift+Up}"/>

      <Button Classes="icon_button" Width="32" Margin="{console:OnPlatform Default='16,0,0,0', Console='1,0,0,0'}" Tapped="StashAll" IsVisible="{Binding !IsBare}">
        <ToolTip.Tip>
          <StackPanel Orientation="Vertical">
            <TextBlock Text="{DynamicResource Text.Stash}"/>
            <TextBlock Classes="small italic" Margin="{console:OnPlatform Default='0,4,0,0', Console='0,1,0,0'}" Text="{DynamicResource Text.CtrlClickTip}" Foreground="{DynamicResource Brush.FG2}"/>
          </StackPanel>
        </ToolTip.Tip>
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.Stashes.Add}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="ðŸ“¦"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>

      <Button Classes="icon_button" Width="32" Margin="{console:OnPlatform Default='16,0,0,0', Console='1,0,0,0'}" Command="{Binding ApplyPatch}" IsVisible="{Binding !IsBare}" ToolTip.Tip="{DynamicResource Text.Apply}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.Diff}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="â‰ "/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>

      <Rectangle Width="1" Height="16"
                 Margin="{console:OnPlatform Default='16,0,0,0', Console='1,0,0,0'}"
                 VerticalAlignment="Center"
                 Fill="{DynamicResource Brush.Border2}"/>

      <Button Classes="icon_button" Width="32" Margin="{console:OnPlatform Default='16,0,0,0', Console='1,0,0,0'}" Command="{Binding CreateNewBranch}" ToolTip.Tip="{DynamicResource Text.Repository.NewBranch}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.Branch.Add}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="ðŸŒ¿"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>

      <Button Classes="icon_button" Width="32" Margin="{console:OnPlatform Default='8,0,0,0', Console='1,0,0,0'}" Click="OpenGitFlowMenu" IsVisible="{Binding !IsBare}" ToolTip.Tip="{DynamicResource Text.GitFlow}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.GitFlow}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="ðŸŒŠ"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>

      <Button Classes="icon_button" Width="32" Margin="{console:OnPlatform Default='8,0,0,0', Console='1,0,0,0'}" Click="OpenGitLFSMenu" IsVisible="{Binding !IsBare}" ToolTip.Tip="{DynamicResource Text.GitLFS}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.LFS}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="ðŸ“¦"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>

      <Button Classes="icon_button" Width="32" Margin="{console:OnPlatform Default='8,0,0,0', Console='1,0,0,0'}" Click="StartBisect" IsVisible="{Binding !IsBare}" ToolTip.Tip="{DynamicResource Text.Bisect}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.Bisect}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="âœ‚"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>

      <Button Classes="icon_button" Width="32" Margin="{console:OnPlatform Default='8,0,0,0', Console='1,0,0,0'}" Click="OpenCustomActionMenu" ToolTip.Tip="{DynamicResource Text.Repository.CustomActions}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Data="{StaticResource Icons.Action}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="âš¡"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>

      <Button Classes="icon_button" Width="32" Margin="{console:OnPlatform Default='8,0,0,0', Console='1,0,0,0'}" Click="Cleanup" ToolTip.Tip="{DynamicResource Text.Repository.Clean}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="14" Height="14" Margin="0,1,0,0" Data="{StaticResource Icons.Clean}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="ðŸ§¹"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>
    </StackPanel>

    <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,4,0">
      <console:OnPlatform>
        <console:OnPlatform.Default>
          <Path Width="13" Height="13" Fill="{DynamicResource Brush.FG1}" Data="{StaticResource Icons.Branch}"/>
        </console:OnPlatform.Default>
        <console:OnPlatform.Console>
          <TextBlock Text="ðŸŒ¿"/>
        </console:OnPlatform.Console>
      </console:OnPlatform>

      <ContentControl Margin="{console:OnPlatform Default='6,0,0,0', Console='1,0,0,0'}">
        <ContentControl.Content>
          <Binding Path="CurrentBranch">
            <Binding.TargetNullValue>
              <TextBlock Classes="primary" Text="--"/>
            </Binding.TargetNullValue>
          </Binding>
        </ContentControl.Content>
        <ContentControl.DataTemplates>
          <DataTemplate DataType="m:Branch">
            <Border Background="Transparent" ToolTip.Tip="{Binding FriendlyName}">
              <TextBlock Classes="primary" Text="{Binding FriendlyName}" MaxWidth="250" TextTrimming="CharacterEllipsis"/>
            </Border>
          </DataTemplate>
        </ContentControl.DataTemplates>
      </ContentControl>

      <Button Classes="icon_button" Width="32" Click="NavigateToHead" ToolTip.Tip="{DynamicResource Text.Repository.NavigateToCurrentHead}">
        <console:OnPlatform>
          <console:OnPlatform.Default>
            <Path Width="13" Height="13" Margin="0,2,0,0" Data="{StaticResource Icons.Target}" Fill="{DynamicResource Brush.FG1}"/>
          </console:OnPlatform.Default>
          <console:OnPlatform.Console>
            <TextBlock Text="ðŸŽ¯"/>
          </console:OnPlatform.Console>
        </console:OnPlatform>
      </Button>
    </StackPanel>
  </Grid>
</UserControl>
